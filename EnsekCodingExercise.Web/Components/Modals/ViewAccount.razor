@using EnsekCodingExercise.Web.Clients
@using EnsekCodingExercise.Web.Models
@inject AccountsApiClient accountApiClient

@if (account == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="form-group row mb-3">
        <label class="col-md-4 col-form-label">Account Id :</label>
        <label class="col-md-6 col-form-label">@account.AccountId</label>
    </div>
    <div class="form-group row mb-3">
        <label class="col-md-4 col-form-label">First Name:</label>
        <label class="col-md-6 col-form-label">@account.FirstName</label>
    </div>
    <div class="form-group row mb-3">
        <label class="col-md-4 col-form-label">Last Name:</label>
        <label class="col-md-6 col-form-label">@account.LastName</label>
    </div>
}

@code {
    private Account? account;

    [Parameter] public int AccountId { get; set; }

    protected override async Task OnInitializedAsync()
    {
        account = await accountApiClient.GetAccountByIdAsync(AccountId);
        await base.OnInitializedAsync();
    }

    protected override async Task OnParametersSetAsync()
    {
        account = await accountApiClient.GetAccountByIdAsync(AccountId);
        await base.OnParametersSetAsync();
    }
}
